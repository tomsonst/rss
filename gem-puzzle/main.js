(()=>{"use strict";var e={782:(e,t,n)=>{function s(){u.elements.knuckles=[];let e=0;for(;e<u.options.size*u.options.size;){let t=Math.floor(100*Math.random());t<u.options.size*u.options.size&&!u.elements.knuckles.includes(t)&&(u.elements.knuckles.push(t),e++)}let t=0;for(let e=0;e<u.elements.knuckles.length;e++)if(0!==u.elements.knuckles[e])for(let n=e;n<u.elements.knuckles.length;n++)u.elements.knuckles[e]>u.elements.knuckles[n]&&0!==u.elements.knuckles[n]&&t++;else if(0===u.elements.knuckles[e]&&u.options.size%2==0){let n=0;n=(e+1)%u.options.size==0?(e+1)/u.options.size:Math.floor((e+1)/u.options.size+1),t+=n}t%2!=0&&s()}function i(){localStorage.setItem("size",u.options.size),localStorage.setItem("arr",u.elements.knuckles),localStorage.setItem("sec",u.sec),localStorage.setItem("min",u.min),localStorage.setItem("move",u.elements.move.textContent),localStorage.setItem("image",u.options.image)}function l(){document.body.innerHTML="",localStorage.removeItem("arr"),localStorage.removeItem("image"),u.sec="00",u.min="00",u.move=0,u.options.pause=!1,u.init()}function o(){if(1===u.elements.knuckles[0]&&u.elements.knuckles[u.elements.knuckles.length-2]===u.elements.knuckles.length-1){let e=!0;for(let t=0;t<u.elements.knuckles.length-1;t++)u.elements.knuckles[t]!==t+1&&(e=!1);if(e){console.log(u.sec);const e=document.createElement("div");e.classList.add("win"),e.innerText=`Ура! Вы решили головоломку за ${u.min}:${u.sec} и ${u.elements.move.textContent} ходов`,document.body.appendChild(e);let t=localStorage.getItem("bestScore");localStorage.setItem("bestScore",t+";"+`${u.min}:${u.sec}, ${u.elements.move.textContent}`),setTimeout((function(){e.parentNode.removeChild(e),u.options.pause="false",l()}),3e3)}}}function m(e){const t=document.querySelector(".empty");let n=+e.target.style.order,s=+e.target.style.order;(s+u.options.size===u.emptyElem.indexEmpty||s-u.options.size===u.emptyElem.indexEmpty||s+1===u.emptyElem.indexEmpty&&u.emptyElem.indexEmpty%u.options.size!=0||s-1===u.emptyElem.indexEmpty&&(u.emptyElem.indexEmpty+1)%u.options.size!=0)&&(u.elements.knuckles[s]=t.textContent,u.elements.knuckles[u.emptyElem.indexEmpty]=+e.target.textContent,s+u.options.size===u.emptyElem.indexEmpty?e.target.classList.add(`top_${u.options.size}`):s-u.options.size===u.emptyElem.indexEmpty?e.target.classList.add(`bottom_${u.options.size}`):s+1===u.emptyElem.indexEmpty&&u.emptyElem.indexEmpty%u.options.size!=0?e.target.classList.add(`left_${u.options.size}`):s-1===u.emptyElem.indexEmpty&&(u.emptyElem.indexEmpty+1)%u.options.size!=0&&e.target.classList.add(`right_${u.options.size}`),function(e){let t;t=document.querySelector("audio"),t&&u.sound&&(t.currentTime=0,t.play())}(),setTimeout((function(){let s=e.target.classList[1];e.target.style.transition="all 0s",e.target.classList.remove(s),e.target.style.order=`${u.emptyElem.orderEmpty}`,u.emptyElem.orderEmpty=`${n}`,t.style.order=u.emptyElem.orderEmpty}),500),e.target.style.transition="all 0.5s",u.emptyElem.indexEmpty=s,u.elements.move.textContent++,i(),o())}function a(){let e=localStorage.getItem("bestScore");if(u.elements.wrap.innerHTML="","string"==typeof e){let t=e.split(";"),n=[];t.forEach((e=>{if("null"!==e){let t=e.split(",");n.push(t)}})),n.sort((function(e,t){return e[1]-t[1]}));const s=document.createElement("div");s.classList.add("wrap_best"),s.innerHTML="<span>Move</span><span>Time</span>",u.elements.wrap.appendChild(s);const i=document.createDocumentFragment();for(let e=0;e<10;e++)for(let t=0;t<2;t++){const s=document.createElement("span");void 0!==n[e]&&(s.innerHTML=t%2==0?`${n[e][1]}`:`${n[e][0]}`,i.appendChild(s))}s.appendChild(i)}else{let e=document.createElement("div");e.innerHTML="Assemble the puzzle",u.elements.wrap.appendChild(e)}let t=document.createElement("div");t.classList.add("back"),t.innerHTML="go back",u.elements.wrap.appendChild(t),document.querySelector(".back").addEventListener("click",(function(){u.elements.wrap.innerHTML="",c()}))}function r(){u.elements.wrap.innerHTML="",u.elements.wrap.innerHTML='\n      <span class="size_3">3 x 3</span>\n      <span class="size_4">4 x 4</span>\n      <span class="size_5">5 x 5</span>\n      <span class="size_6">6 x 6</span>\n      <span class="size_7">7 x 7</span>\n      <span class="size_8">8 x 8</span>\n      <div class="back">go back</div>';for(let e=0;e<u.elements.wrap.children.length;e++)u.elements.wrap.children[e].addEventListener("click",(function(e){"back"===e.target.classList[0]?(u.elements.wrap.innerHTML="",c()):("size_3"===e.target.classList[0]?u.options.size=3:"size_4"===e.target.classList[0]?u.options.size=4:"size_5"===e.target.classList[0]?u.options.size=5:"size_6"===e.target.classList[0]?u.options.size=6:"size_7"===e.target.classList[0]?u.options.size=7:"size_8"===e.target.classList[0]&&(u.options.size=8),document.body.innerHTML="",localStorage.removeItem("arr"),localStorage.removeItem("image"),u.sec="00",u.min="00",u.move=0,u.options.pause=!1,u.init())}))}function c(){const e=document.createElement("span"),t=document.createElement("span"),n=document.createElement("span"),s=document.createElement("span");e.classList.add("new-game"),t.classList.add("score"),n.classList.add("setting"),s.classList.add("sound"),e.textContent="New game",t.textContent="Best score",n.textContent="Setting",!0===u.sound?s.textContent="Sound ON":s.textContent="Sound OFF",u.elements.wrap.appendChild(e),u.elements.wrap.appendChild(t),u.elements.wrap.appendChild(n),u.elements.wrap.appendChild(s),e.addEventListener("click",l),t.addEventListener("click",a),n.addEventListener("click",r),s.addEventListener("click",(function(){u.sound=!u.sound,u.sound?document.querySelector(".sound").textContent="sound ON":document.querySelector(".sound").textContent="sound OFF"}))}function d(){u.options.pause=!u.options.pause,u.options.pause?u.elements.wrap.style.display="flex":u.elements.wrap.style.display="none"}function p(e){e.preventDefault();const t=u.elements.knuckleContainer.querySelector(".selected"),n=e.target;if(t===n||!n.classList.contains("empty"))return;const s=document.querySelector(".empty");e.target.style.order;let l=+t.style.order;if(l+u.options.size==u.emptyElem.indexEmpty||l-u.options.size==u.emptyElem.indexEmpty||l+1==u.emptyElem.indexEmpty&&u.emptyElem.indexEmpty%u.options.size!=0||l-1==u.emptyElem.indexEmpty&&(+u.emptyElem.indexEmpty+1)%u.options.size!=0){u.elements.knuckles[l]=s.textContent,u.elements.knuckles[u.emptyElem.indexEmpty]=+t.textContent;let e=+t.style.order;t.style.order=+n.style.order,u.emptyElem.indexEmpty=+e,n.style.order=+u.emptyElem.indexEmpty,u.emptyElem.orderEmpty=u.emptyElem.indexEmpty}u.elements.move.textContent++,i(),o()}n.d(t,{r:()=>u});const u={elements:{knuckleContainer:null,knuckles:[],navContainer:null,wrap:null,time:"00:00",move:0,menu:"menu"},emptyElem:{orderEmpty:0,indexEmpty:null},options:{pause:!1,size:4,image:""},sec:0,min:"00",move:0,sound:!1,init(){s(),"string"==typeof localStorage.getItem("arr")&&(this.elements.knuckles=[],localStorage.getItem("arr").split(",").forEach((e=>{this.elements.knuckles.push(+e)})),this.sec=localStorage.getItem("sec"),this.min=localStorage.getItem("min"),this.move=localStorage.getItem("move"),this.options.size=+localStorage.getItem("size")),this.elements.knuckleContainer=document.createElement("div"),this.elements.navContainer=document.createElement("nav"),this.elements.time=document.createElement("div"),this.elements.move=document.createElement("div"),this.elements.menu=document.createElement("div"),this.elements.knuckleContainer.classList.add("area"),this.elements.navContainer.classList.add("nav"),this.elements.time.classList.add("time"),this.elements.move.classList.add("move"),this.elements.menu.classList.add("menu");const e=new Audio("sounds/svipper.mp3");document.body.appendChild(e),document.body.appendChild(this.elements.navContainer),document.body.appendChild(this.elements.knuckleContainer),this.elements.navContainer.appendChild(this.elements.time),this.elements.navContainer.appendChild(this.elements.move),this.elements.navContainer.appendChild(this.elements.menu),this.elements.wrap=document.createElement("div"),this.elements.wrap.classList.add("wrap"),this.elements.knuckleContainer.appendChild(this.elements.wrap),c(),this.elements.knuckleContainer.appendChild(function(){u.elements.knuckleContainer.style.gridTemplateColumns=`repeat(${u.options.size}, 1fr)`;const e=document.createDocumentFragment();return null!==localStorage.getItem("image")?u.options.image=localStorage.getItem("image"):u.options.image=Math.floor(10*Math.random()),u.elements.knuckles.forEach((t=>{const n=document.createElement("div");if(n.textContent=u.elements.knuckles[t],0!==u.elements.knuckles[t]){n.classList.add("knuckle"),n.style.order=t,n.setAttribute("draggable","true"),n.style.backgroundImage=`url(images/${u.options.image}.jpg)`,n.style.backgroundSize=`${u.elements.knuckleContainer.clientWidth}px ${u.elements.knuckleContainer.clientWidth}px`;let e=-u.elements.knuckleContainer.clientWidth/u.options.size*(u.elements.knuckles[t]%u.options.size-1),s=-u.elements.knuckleContainer.clientWidth/u.options.size*Math.floor((u.elements.knuckles[t]-1)/u.options.size);n.style.backgroundPositionX=`${e}px`,n.style.backgroundPositionY=`${s}px`,n.addEventListener("click",m)}else n.textContent=0,n.classList.add("empty"),n.style.order=t,u.emptyElem.indexEmpty=t,u.emptyElem.orderEmpty=t;e.appendChild(n)})),e}()),this.elements.knuckleContainer.addEventListener("dragstart",(function(e){e.target.classList.add("selected")})),this.elements.knuckleContainer.addEventListener("dragend",(function(e){e.target.classList.remove("selected")})),this.elements.knuckleContainer.addEventListener("dragover",p),setInterval((function(){u.elements.time.textContent=`${u.min}:${u.sec}`}),1e3),this.elements.move.textContent=this.move,this.elements.menu.textContent="menu",this.elements.menu.addEventListener("click",d)}};window.addEventListener("DOMContentLoaded",(function(){u.init()})),function e(){u.options.pause||(u.sec++,+u.sec<10?u.sec="0"+u.sec:60==+u.sec&&(u.min++,u.sec="00",+u.min<10&&(u.min="0"+u.min))),setTimeout(e,1e3)}()}},t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(782)})();